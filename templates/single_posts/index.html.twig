{% extends 'blog-base.html.twig' %}

{% block title %}{{post.title}} - Blog Diamono Tech {% endblock %}

{% block body %}

    <!--================ Start Banner Area =================-->
    {# <section class="banner_area">
        <div class="banner_inner d-flex align-items-center">
            <div class="container">
                <div class="banner_content text-center">
                    <h2>Blog Details</h2>
                    <div class="page_link">
                        <a href="index.html">Home</a>
                        <a href="blog.html">Blog</a>
                        <a href="single-blog.html">Blog Details</a>
                    </div>
                </div>
            </div>
        </div>
    </section> #}
    <!--================ End Banner Area =================-->
    
    <!--================Blog Area =================-->
    <section class="blog_area single-post-area section_gap">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 posts-list">
                        <div class="single-post row">
                            <div class="col-lg-12">
                                <div class="feature-img">
                                        <img src="{{ asset ('images/posts/' ~ post.imageName) }}" alt="{{post.title}}" class="img-fluid">
                                </div>									
                            </div>
                            <div class="col-lg-3  col-md-3">
                                <div class="blog_info text-right">
                                    {# <div class="post_tag">
                                                <p>Categories Articles</p>
                                            {% for categorie in categories %}
                                            <span><a href="{{ path        ('app_posts_by_categorie', { id: categorie.id }) }}" class="categorie-link {% if categorie.id == app.request.get('categorie_id') %}active{% endif %}" 
                                                data-categorie-id="{{ categorie.id }}">{{categorie.name}}
                                            </a>{% if not loop.last %},
                                            {% endif %}          
                                            {% endfor %}
                                    </div> #}
                                    <ul class="blog_meta list">
                                        <li><a href="#"><i class="lnr lnr-user"></i> Samba </a></li>
                                        <li><a href="#"><i class="lnr lnr-calendar-full"></i> {{post.createdAt | date('d-m-Y')}}</a></li>
                                        <li><a href="#"><i class="lnr lnr-eye"></i> 1.2M Vues</a></li>
                                        {% if totalComments > 0 %}
                                        <li><a href="#"><i class="lnr lnr-bubble"></i> {{ totalComments }} Comments</a></li>
                                        {% endif %}
                                    </ul>
                                    <ul class="social-links">
                                        <li>
                                            <a href="https://www.facebook.com/sharer/sharer.php?u={{ app.request.uri }}&quote={{ post.title }}" target="_blank" class="facebook"></i></a>
                                        </li>
                                        <li>
                                            <a href="https://twitter.com/intent/tweet?url={{ app.request.uri }}&text={{ post.title }}" target="_blank" class="twitter"><i class="fa-brands fa-x-twitter"></i></i></a>
                                        </li>
                                        <li>
                                            <a href="https://www.linkedin.com/shareArticle?mini=true&url={{ app.request.uri }}&title={{ post.title }}&summary={{ post.content|slice(0, 100) }}" target="_blank" class="linkedin"><i class="fa-brands fa-linkedin"></i></a>
                                        </li>
                                        
                                        <li>
                                            <a href="https://api.whatsapp.com/send?text={{ post.title }} {{ app.request.uri }}" target="_blank" class="whatsapp"><i class="fa-brands fa-whatsapp"></i></a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-lg-9 col-md-9 blog_details">
                                <h2>{{ post.title }}</h2>
                                <p class="excert">
                                    {{ post.content}}
                                    {# {% set excerpt = post.content|slice(0, 100) %} #}
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <div class="quotes">
                                        {{ post.paragraphe2}}
                                </div>
                                <div class="row">
                                    <div class="col-6">
                                        {% if post.imageTwoName is not empty %}
                                            <img src="{{ asset ('images/posts/' ~ post.imageTwoName) }}" alt="{{post.title}}" class="img-fluid">
                                        {% endif %}
                                    </div>
                                    <div class="col-6">
                                        {% if post.imageTwoName is not empty %}
                                            <img src="{{ asset ('images/posts/' ~ post.imageThreeName) }}" alt="{{post.title}}" class="img-fluid">
                                        {% endif %}
                                    </div>	
                                    <div class="col-lg-12 mt-25">
                                        <p>
                                            {{ post.paragraphe3}}
                                        </p>											
                                    </div>									
                                </div>
                            </div>
                        </div>
                        <div class="navigation-area">
                            <div class="row">
                                {% if previusPost %}
                                <div class="col-lg-6 col-md-6 col-12 nav-left flex-row d-flex justify-content-start align-items-center">
                                    <div class="thumb">
                                        <a href="{{ path('app_single_posts', { id: previusPost.id }) }}"><img style="max-height:80px; width:auto" src="{{ asset ('images/posts/' ~ post.imageName) }}" alt=""></a>
                                    </div>
                                    <div class="arrow">
                                        <a href="#"><span class="lnr text-white lnr-arrow-left"></span></a>
                                    </div>
                                    <div class="detials">
                                        <p>Post précedent</p>
                                        <a href="{{ path('app_single_posts', { id: previusPost.id }) }}"><h4>{{previusPost.title}}</h4></a>
                                    </div>
                                </div>
                               {% else %}
                                <!--espace vide pour maintenir l'équilibre des colonnes -->
                                <div class="col-lg-6 col-md-6 col-12 nav-left"></div>
                                {% endif %}

                                {% if nextPost %}
                                <div class="col-lg-6 col-md-6 col-12 nav-right flex-row d-flex justify-content-end align-items-center">
                                    <div class="detials">
                                        <p>Post suivant</p>
                                        <a href="{{ path('app_single_posts', { id: nextPost.id }) }}"><h4>{{ nextPost.title}}</h4></a>
                                    </div>
                                    <div class="arrow">
                                        <a href="#"><span class="lnr text-white lnr-arrow-right"></span></a>
                                    </div>
                                    <div class="thumb">
                                        <a href="{{ path('app_single_posts', { id: nextPost.id }) }}"><img src="{{ asset ('images/posts/' ~ post.imageName) }}" alt="" style="max-height:80px; width:auto"></a>
                                    </div>										
                                </div>	
                                 {% else %}
                                <!-- Espace vide pour maintenir l'équilibre des colonnes -->
                                <div class="col-lg-6 col-md-6 col-12 nav-right"></div>
                                {% endif %}								
                            </div>
                        </div>
                        <div class="comments-area"> 
                            {# {{ dump(totalComments) }} #}
                                {# {{ dump(post.id) }} #}
                            {% if totalComments > 0 %}
                            <h4>{{ totalComments }} Commentaire (s)</h4>
                            <div class="comment-list">
                                {% for message in messages %}
                                <div class="single-comment justify-content-between d-flex mb-5">
                                    <div class="user justify-content-between d-flex">
                                        <div class="thumb">
                                            <img src="img/blog/c1.jpg" alt="">
                                        </div>
                                        <div class="desc">
                                            <h5><a href="#"> {{ message.name }} </a></h5>
                                            <p class="date"> {{ message.createdAt | date('d-m-Y') }} </p>
                                            <p class="comment">
                                                {{ message.content }}
                                            </p>
                                        </div>
                                    </div>
                                    {# <div class="reply-btn">
                                            <a href="" class="btn-reply text-uppercase">Commenter</a> 
                                    </div> #}
                                </div>
                                {% endfor %}
                                {% else %}
                                <p class="text-center">Soyez le/a premier/ère à commenter cet Article</p>
                                {% endif %}
                            </div>	                                      			
                        </div>
                    
                        <div class="comment-form">
                                <h4>Laisser un commentaire</h4>
                                {{ form_start(form) }}
                                <div class="form-group form-inline comment-list">
                                        <div class="form-group col-lg-6 col-md-6 name">
                                            {{ form_row(form.name) }}
                                        </div>                                    
                                        <div class="form-group col-lg-6 col-md-6 email">
                                            {{ form_row(form.email) }}
                                        </div>
                                </div>
                                <div class="form-group">
                                    {{ form_row(form.subject) }}
                                </div>      
                                <div class="form-group">
                                    {{ form_row(form.content) }}
                                </div>
                                <div class="form-group">
                                    {{ form_row(form.submit) }}
                                </div>
                                {{ form_end(form) }}                                    
                        </div>					
                </div>
                {% include 'posts/_sidebar.html.twig'%}
            </div>
        </div>
    </section>
    <!--================Blog Area =================-->
{% endblock %}
